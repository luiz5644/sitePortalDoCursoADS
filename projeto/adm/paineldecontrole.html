<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>Gerenciador</title>
    
    <style>
    
     body {
  margin: 0;
  font-family: Arial, sans-serif;
}
:root {
        --fundo-card: rgb(220, 228, 235);
       
        
      }

.header {
  background-color: white;
  width: 100%;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  position: fixed;
  top: 0;
  left: 0;
  z-index: 1000;
}

.main {
  display: flex;
  margin-top: 60px; /* Altura do header */
}

.sidebar {
  width: 200px;
  background-color:rgb(245, 245, 245);
  height: calc(100vh - 60px); /* altura da tela menos o header */
  padding: 10px;
  position: fixed;
  top: 60px;
  left: 0;
}

.content {
  flex: 1;
  margin-left: 250px; /* Largura da sidebar */
  padding: 20px;
}

.sidebar button {
  display: flex;
  align-items: center;
  width: 100%;
  padding: 10px 15px;
  background: none;
  border: none;
  text-align: left;
  cursor: pointer;
  font-size: 16px;
  margin: 5px;
}

.sidebar button:hover {
  background-color: var(--fundo-card);
  border-radius: 10px;
  
}

.sidebar button:focus {
  background-color: var(--fundo-card);
  border-radius: 10px;
}

.card {
  background-color: #ffffff;
  padding: 10px;
  border-radius: 8px;
  margin-bottom: 10px;
}

.card button {
  margin-left: 10px;
  background: none;
  border: none;
  cursor: pointer;
}
.fundo-card{
    background-color: var(--fundo-card);
    padding: 10px;
    border-radius: 10px;
}

.top-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}

.top-bar button {
  background-color:var(--fundo-card);
  border: none;
  padding: 8px 12px;
  border-radius: 6px;
  cursor: pointer;
}

.top-bar a {
  text-decoration: none;
  color: black;
}

.hidden {
  display: none;
}
  </style>
  </head>
  

  <body>
    <div class="header">
      <div class="img-ads">
        <img src="imagem/logoads.png" alt="Logo ADS" />
      </div>
    </div>

    <div class="main">
      <div class="sidebar">
        <button onclick="showSection('eventos')"> <img width="30" height="30" src="https://img.icons8.com/windows/32/3053c6/today.png" alt="today"/> Eventos</button>
        <button onclick="showSection('projetos')">  <img width="30" height="30" src="https://img.icons8.com/ios/50/3053c6/project.png" alt="project"/> Projetos</button>
        <button onclick="showSection('professores')"> <img width="30" height="30" src="https://img.icons8.com/ios/50/3053c6/groups.png" alt="groups"/> Professores</button>
        <button onclick="showSection('salas')"> <img width="30" height="30" src="https://img.icons8.com/ios/50/3053c6/university.png" alt="university"/> Salas</button>
        <button onclick="showSection('usuarios')"><img width="30" height="30" src="https://img.icons8.com/small/32/3053c6/user.png" alt="user"/> Usuários</button>
      </div>

      <div class="content">
        <!-- Eventos -->
        <div id="eventos" class="section hidden">
          <div class="top-bar">
            <button><a href="cadastroevento.html">+ Novo evento</a></button>
          </div>
          <div class="fundo-card"><div class="card">Evento X <button>editar</button><button>excluir</button></div></div>
        </div>

        <!-- Projetos -->
        <div id="projetos" class="section hidden">
          <div class="top-bar">
            <button><a href="cadastroprojeto.html">+ Novo projeto</a></button>
          </div>
          <div class="fundo-card">
            <div class="card">Projeto A <button >editar</button><button >excluir</button></div>
          </div>
        </div>

        <!-- Professores -->
        <div id="professores" class="section hidden">
          <div class="top-bar">
            <button><a href="cadastroprofessor.html">+ Novo professor</a></button>
          </div>
          <div class="fundo-card"><div class="card">Professor X <button>editar</button><button>excluir</button></div></div>
        </div>

        <!-- Salas -->
        <div id="salas" class="section hidden">
          <div class="top-bar">
            <button><a href="cadastrosalas.html">+ Nova sala</a></button>
          </div>
          <div class="fundo-card"><div id="lista-salas"></div></div>
        </div>

        <!-- Usuários -->
        <div id="usuarios" class="section hidden">
          <div class="top-bar">
            <button><a href="cadastrousuario.html">+ Novo usuário</a></button>
          </div>
          <div class="fundo-card"><div class="card">Usuário Y <button>editar</button><button>excluir</button></div></div>
        </div>
      </div>

      <script>
  // Alterna entre as seções
  function showSection(sectionId) {
    document.querySelectorAll(".section").forEach((section) => {
      section.classList.add("hidden");
    });
    const section = document.getElementById(sectionId);
    section.classList.remove("hidden");

    if (sectionId === "salas") {
      carregarSalas();
    }
  }

  // Carrega as salas do banco
  async function carregarSalas() {
    try {
      const res = await fetch('http://localhost:3000/salas');
      const salas = await res.json();
      const lista = document.getElementById('lista-salas');
      lista.innerHTML = '';

      salas.forEach((sala) => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <strong>${sala.nome}</strong> - ${sala.localizacao}
          <button onclick="editarSala('${sala.id || sala._id}', '${sala.nome}', '${sala.localizacao}')">editar</button>
          <button onclick="excluirSala('${sala.id || sala._id}')">excluir</button>
        `;
        lista.appendChild(card);
      });
    } catch (err) {
      console.error('Erro ao carregar salas:', err);
    }
  }

  // Exclui uma sala
  async function excluirSala(id) {
  const confirmacao = confirm("Tem certeza que deseja excluir esta sala?");
  if (confirmacao) {
    try {
      const res = await fetch(`http://localhost:3000/salas/${id}`, { method: "DELETE" });
      if (res.ok) {
        alert("Sala excluída com sucesso!");
        carregarSalas();
      } else {
        alert("Erro ao excluir sala.");
      }
    } catch (err) {
      console.error("Erro ao excluir sala:", err);
    }
  }
}



  // Exibe a aba de salas assim que a página carregar
  window.addEventListener("DOMContentLoaded", () => {
    showSection("eventos");
    carregarSalas();
  });
</script>

  </body>
</html>

